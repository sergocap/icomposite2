.place.new
  = simple_form_for [@ic, @place] do |f|
    = f.input :x, as: :hidden
    = f.input :y, as: :hidden
    = f.input :crop_x, as: :hidden
    = f.input :crop_y, as: :hidden
    = f.input :crop_height, as: :hidden
    = f.input :crop_width, as: :hidden
    = f.input :pre_width, as: :hidden
    = f.input :pre_height, as: :hidden
    = f.input :r_component, as: :hidden
    = f.input :g_component, as: :hidden
    = f.input :b_component, as: :hidden
    .display_none
      = f.input :image, input_html: { :class => 'js-image_input' }

    .mini_previews
      = image_tag @original_place.image.url
      .svg_preview_wrapper{ style: "width: #{@ic.place_width}px; height: #{@ic.place_height}px;" }
        %svg{ class: 'filterPlaceSmall', :width => @ic.place_width, :height => @ic.place_height }
          %defs
            %filter{ id: 'fp1' }
              %feComponentTransfer
                %feFuncR{ class: 'filter_r', type: 'linear', slope: '1' }
                %feFuncG{ class: 'filter_g', type: 'linear', slope: '1' }
                %feFuncB{ class: 'filter_b', type: 'linear', slope: '1' }
                %feFuncA{ type: 'identity' }

          %image{ :height => '100%', :width => '100%', 'xlink:href' => '', class: 'svg_place_image small', filter: 'url(#fp1)' }

    .js-image_wrapper
      = image_tag @place.image.url, class: 'js-image_preview', data: { ratioW: @ic.place_width, ratioH: @ic.place_height }

      %svg{ class: 'filterPlace', :height => '0', :width => '0' }
        %defs
          %filter{ id: 'fp1' }
            %feComponentTransfer
              %feFuncR{ class: 'filter_r', type: 'linear', slope: '1' }
              %feFuncG{ class: 'filter_g', type: 'linear', slope: '1' }
              %feFuncB{ class: 'filter_b', type: 'linear', slope: '1' }
              %feFuncA{ type: 'identity' }
        %image{ :height => '100%', :width => '100%', 'xlink:href' => '', class: 'svg_place_image', filter: 'url(#fp1)' }

    .mini_colors_input

    .actions
      %button{ :type => 'button', :class => 'js-image_upload_button btn btn-default' }= 'Выбрать изображение'
      = f.input :comment, label: false, placeholder: 'Некий текст (60 символов)', :input_html => {:maxlength => 60, :size => 60, class: 'form-control' }
      = f.input :link,    label: false, placeholder: 'Ссылка', :input_html => { class: 'form-control' }



    = f.button :submit, class: 'btn-success'
